exports.ids = [5];
exports.modules = {

/***/ "./md/blog/2020-05_creating-a-chrome-extension.md":
/*!********************************************************!*\
  !*** ./md/blog/2020-05_creating-a-chrome-extension.md ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"---\\ntitle: \\\"Creating a Chrome extension\\\"\\nexcerpt: \\\"In this post, I will show you how to create a simple Chrome extension, using just JavaScript, HTML and CSS. I will also summarize all what a Chrome extension can do, and I will introduce how to create more complex extensions based on modern JavaScript frameworks like React, Angular or Vue.\\\"\\npublished: true\\ndatePublished: 1590994800000\\ndate: \\\"2020-06-01T09:00:00.000Z\\\"\\nauthor: Juangui Jordán\\ntags:\\n  - Dan Abramov\\nauthorPhoto: /img/authors/jguix.jpeg\\nbannerPhoto: \\\"/img/blog/2020-05_creating-a-chrome-extension/creating-a-chrome-extension.jpg\\\"\\nthumbnailPhoto: \\\"/img/blog/2020-05_creating-a-chrome-extension/creating-a-chrome-extension.jpg\\\"\\ncanonicalUrl: https://juanguijordan.com/blog/2020-05_creating-a-chrome-extension\\n---\\n\\nIn this post, I will show you how to create a simple [Chrome extension](https://chrome.google.com/webstore/category/extensions). I will also summarize what a Chrome extension can do, and I will introduce how to create more complex extensions based on modern JavaScript frameworks like React, Angular or Vue.\\n\\nWhat is a Chrome extension? Google Chrome extensions are like small applications living in your browser, based on standard web technologies, such as HTML, CSS and JavaScript. They take advantage of some Chrome APIs, providing the foundations for building an app, like storage and messaging. Google Chrome extensions can interact with the web pages open in your browser tabs, but they are not really meant to. They can live on their own and provide any kind of functionality, separate from the browsing experience. You can build anything, from an agenda, to a pomodoro timer, to a web image scrapper. You can think of Chrome as the Electron platform, providing a basis for building JavaScript applications that can interact with the browsing experience.\\n\\nChrome extensions can stay dormant until some trigger awakes them, making some content or script to be injected, executed, or some popup shown. These scripts live in something called “Isolated Worlds” in relation with the web pages being browsed, which means that a Chrome extension can only share the DOM with a particular page, but not the script variables or functions. Chrome extensions can thus modify the DOM, inject additional CSS or JavaScript scripts which interact with the same DOM, but can not directly modify the original page CSS or JavaScript. On the other hand, the extensions can communicate with the page through messages, so you can create a page that gracefully interact with a Chrome extension.\\n\\n## Extension capabilities\\n\\nThis is an incomplete summary of what an extension can do:\\n\\n- **Show an icon**. The extension icon can be modified on runtime, or show a badge over it, with a colored background and a 4 letter text in it.\\n- **Show a popup**. Clicking on the extension icon can trigger a popup with content.\\n- **Show a secondary menu**. Right clicking on the extension icon can trigger a secondary menu.\\n- **Respond to shortcuts**. Keyboard shortcuts can be associated to extension actions (i.e. CTRL+SHIFT+V).\\n- **Respond to actions in the URL bar** (the so called omnibox). Text shortcuts can be used in the omnibox to trigger actions in the extension (i.e. “myext+<TAB>\\\").\\n- **Respond to visiting some web page**. For instance, modifying the icon state or popup content.\\n  Modify the content of a web site. For instance, modifying the DOM by a content script or applying additional CSS files.\\n- **Have an Options page** for the extension configuration.\\n- **Replace the History page, Bookmarks page or New Tab page** of Google Chrome.\\n- **Exchanging messages** with a web site or with itself. A extension can use messaging to talk to some web page being browsed, or to communicate between parts of the extension itself.\\n- **Store information** in local storage, Chrome storage (storage which is synchronized across different devices where the user is logged in) or any storage native to JS, for instance sessionStorage.\\n- **Show notifications** as a toast.\\n- **Use several APIs provided by Google Chrome**.\\n- **Be free or paid**. When creating a paid extension, you can choose to use the Chrome store or your own payment means.\\n\\n## The basics\\n\\nThe only mandatory file of a Chrome extension is the manifest. It has to be placed in the root directory, and it communicates the extension metadata, permissions and other files involved.\\n\\nThe manifest format has a lot of options, which can be ckecked in this page (https://developer.chrome.com/extensions/manifest), but we will focus on the most important ones. Let’s introduce the Cat detector extension manifest:​\\n\\n```json\\n{\\n  \\\"name\\\": \\\"Cat detector\\\",\\n  \\\"description\\\": \\\"Spots cats in the page you are browsing\\\",\\n  \\\"manifest_version\\\": 2,\\n  \\\"version\\\": \\\"1.0\\\",\\n  \\\"background\\\": {\\n    \\\"persistent\\\": false,\\n    \\\"scripts\\\": [\\\"background.js\\\"]\\n  },\\n  \\\"content_scripts\\\": [\\n    {\\n      \\\"matches\\\": [\\\"<all_urls>\\\"],\\n      \\\"js\\\": [\\\"content.js\\\"]\\n    }\\n  ],\\n  \\\"browser_action\\\": {\\n    \\\"default_popup\\\": \\\"popup.html\\\"\\n  },\\n  \\\"icons\\\": {\\n    \\\"16\\\": \\\"images/footprint-16.png\\\",\\n    \\\"32\\\": \\\"images/footprint-32.png\\\",\\n    \\\"48\\\": \\\"images/footprint-48.png\\\",\\n    \\\"128\\\": \\\"images/footprint-128.png\\\"\\n  },\\n  \\\"permissions\\\": [\\\"activeTab\\\"]\\n}\\n```\\n\\nThe manifest declares some capabilities that will be used by the extension:\\n\\n- It declares a background script. Background scripts can activate at any time, but don't have direct access to the tabs content.\\n- It declares a content script. Content scripts get injected in the same page that is being browsed and have access to the content. A matches expression is used to determine when the script is injected. In this case we chose `<all urls>`, meaning it will be injected in any web page.\\n- It declares a browser action, meaning a extension that is able to work independently of the current browsed page. If we wanted to create a extension that only activates when some conditions are met in the page you are browsing, we would use a \\\"page action”. The reason we chose browser action is that cats can be seen almost everywhere on the internet. A second reason is that we want to display a badge over the extension icon, and that is only possible using a browser action.\\n- Inside the browser action, it declares a popup that will be open on clicking on the extension icon.\\n- It declares icons. The smaller ones used for the browser icon, depending on the display resolution, and the bigger ones used in the extensions menu of Chrome and the Chrome Store.\\n\\n## Our sample extension\\n\\nNow, getting to the point of this post. This page action uses a background script that, on page load, calls sends a message to the content script, which in turn counts the number of times the words “cat”, “kitten” or “kitty” appear in our page. After receiving a response, the background task displays a badge over the icon to communicate the number of kittens spot. On clicking on the extension icon, a popup will be shown showing a happy kitten image together with the counter.\\n\\nLet’s present our extension file structure:\\n\\n```\\n-audios\\n |-meow_0.mp3\\n |-meow_1.mp3\\n |-meow_2.mp3\\n |-meow_3.mp3\\n |-meow_4.mp3\\n |-meow_5.mp3\\n |-meow_6.mp3\\n-images\\n |-footprint-16.png\\n |-footprint-32.png\\n |-footprint-48.png\\n |-footprint-128.png\\n-background.js\\n-content.js\\n-manifest.js\\n-popup.html\\n-popup.js\\n```\\n\\nIt includes the extension icons, some audio files, the manifest, the background script, the content script, and the popup html and js files.\\n\\nThis is how the background script looks like. Comments have been included to guide you through the important stuff:\\n\\n```\\nconst maxMeows = 6;\\n\\n// The extension listens to the onUpdated event, and executes when the page is loaded\\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\\n  if (changeInfo.status === \\\"complete\\\" && tab.active) {\\n    detectCats(tabId);\\n  }\\n});\\n\\n// It executes the cat detection as well when we switch tabs on the active tab\\nchrome.tabs.onActivated.addListener((activeTab) => detectCats(activeTab.tabId));\\n\\nconst detectCats = (tabId) => {\\n  // Here we clear the badge\\n  chrome.browserAction.setBadgeText({ text: \\\"\\\" });\\n  // Then we send a message to the content script, together with a callback\\n  chrome.tabs.sendMessage(tabId, { text: \\\"cat_count\\\" }, onCatCount);\\n};\\n\\n// This is the callback called by the content script\\nconst onCatCount = (catNumber) => {\\n  if (!catNumber) {\\n    deactivateIcon();\\n  } else {\\n    // When cats are detected, show an animation on the badge\\n    animateBadge(catNumber);\\n  }\\n};\\n\\nconst deactivateIcon = () => {\\n  // Here we detect what the active tab is and disable the action\\n  chrome.tabs.query({ active: true, currentWindow: true }, (activeTab) => {\\n    chrome.browserAction.disable(activeTab[0].id);\\n  });\\n};\\n\\nconst animateBadge = (catNumber) => {\\n  // Limit meows, we don't want 1000 sounds to be played\\n  let i = catNumber - maxMeows > 0 ? catNumber - maxMeows : 1;\\n  let j = 0;\\n  // Cats will meow at random times\\n  for (; i <= catNumber - 1; i++, j++) {\\n    updateBadge(i, j * Math.random() * 400);\\n  }\\n  // Last cat should come last, let's give it the highest delay\\n  updateBadge(catNumber, j * 500);\\n};\\n\\nconst updateBadge = (catIndex, delay) => {\\n  // After some specified delay display a number on the badge and play a meow sound\\n  setTimeout(() => {\\n    (\\n      new Audio(chrome.runtime.getURL(`audios/meow_${catIndex % 7}.mp3`))\\n    ).play();\\n    chrome.browserAction.setBadgeText({ text: catIndex.toString() });\\n  }, delay);\\n};\\n```\\n\\nThe content script basically receives the `cat_count` message and responds to it. Some logic has been included to count the cats with a regex expression:\\n\\n```\\nchrome.runtime.onMessage.addListener((msg, sender, sendResponse) => {\\n  if (msg.text === \\\"cat_count\\\") {\\n    sendResponse(countCats());\\n  }\\n});\\n\\nconst countCats = () => {\\n  var content =\\n    document.body[\\\"innerText\\\" in document.body ? \\\"innerText\\\" : \\\"textContent\\\"];\\n  content = removeScriptsFromContent(content);\\n  var regex = /(cat|cats|kitten|kittens|kitty|kitties)[\\\\s.,]/gi;\\n\\n  return content.match(regex)?.length || 0;\\n};\\n\\nconst removeScriptsFromContent = (strCode) => {\\n  return strCode.replace(/<script.*?>.*?<\\\\/script>/gim, \\\"\\\");\\n};\\n```\\n\\nThe popup html file just displays an image and declares the javascript file:\\n\\n```\\n<html>\\n  <body>\\n    <img id=\\\"cat_image\\\" />\\n    <script src=\\\"popup.js\\\"></script>\\n  </body>\\n</html>\\n```\\n\\nThe popup js file executes a function on load which in turn sends a message to the content script to count cats again. This is because popups do not live until they are open, so if some update on the popup needs to be done, it is the popup who needs to start the action:\\n\\n```\\nwindow.onload = () => {\\n  chrome.tabs.query({ active: true, currentWindow: true }, (activeTab) => {\\n    const tabId = activeTab[0].id;\\n    chrome.tabs.sendMessage(tabId, { text: \\\"cat_count\\\" }, onCatCount);\\n  });\\n};\\n\\nconst onCatCount = (catNumber) => {\\n  document.getElementById(\\n    \\\"cat_image\\\"\\n  ).src = `https://cataas.com/c/s/${catNumber}%20happy%20cats%20detected?t=sq&width=350`;\\n};\\n```\\n\\nTadaaaa, this is the result of the cat detector extension in action:\\n\\n![Cat extension](/img/blog/2020-05_creating-a-chrome-extension/cat_extension.png)\\n\\n## Testing locally our extension\\n\\nIf you want to test your extension in your local machine, you just need to go to the menu item More Tools —> Extensions, then click on Load Unpacked, and select the folder where your manifest and the rest of the files are.\\n\\n![Loading the extension for testing](/img/blog/2020-05_creating-a-chrome-extension/load_extension.png)\\n\\n## Debugging\\n\\nDebugging gets particularly complex since every bit of a extension has to be inspected in a different way.\\n\\nRegarding the background scripts, they are inspected in the extensions. To open the dev tools you need to click on the background page link in the extension details.\\n\\n![Opening the extension dev tools](/img/blog/2020-05_creating-a-chrome-extension/extension_info.png)\\n\\nContent scripts are inspected in the web page that you are browsing, since they are injected to the page. They are shown in a **Content Scripts** tab.\\n\\n![Debugging content scripts](/img/blog/2020-05_creating-a-chrome-extension/debugging_content_scripts.png)\\n\\nI could not found the way to inspect popup scripts, even the console logs got lost somewhere, so showing an alert was the only way to check that the popup was alive and doing stuff.\\n\\n## Publishing\\n\\nTo publish a Google Chrome extension you need to register as a Chrome developer, pay \\\\$5 and fill in some information about your extension name, description and images or videos. The process is very similar than the one followed to publish an app in Google Play. After submitting your extension for approval, you need to wait for a response. Negative responses are quite fast -my first extension was rejected for no reason, and I had to send an email to ask for a human review-, positive ones can take a few hours or days.\\n\\n## Going further\\n\\nThe Chrome developer site for extensions provides a great number of sample extensions. These are simple extensions tackling very specific features that can help you learn build extensions.\\n\\nhttps://developer.chrome.com/extensions/samples\\n\\nThere are many boilerplate projects out there to help you develop more complex extensions using React, Angular or Vue. Take the following links as a starting point:\\n\\n- https://github.com/lxieyang/chrome-extension-boilerplate-react\\n- https://github.com/larscom/ng-chrome-extension\\n- https://github.com/Kocal/vue-web-extension\\n\\n## Recap\\n\\nCreating Chrome extensions can be fun, and you can also find many productive scenarios for them. Developing extensions is easy if you know basic web technologies as HTML, CSS and JavaScript. We showed you the basics of a Chrome extension and guided you through the creation of a simple extension.\\n\\nIf you want to check the full extension code, please go to this [github repository](https://github.com/jguix/chrome-cat-detector).\\n\\nCan you imagine something that could be delivered as a Chrome extension? We would like to hear about your thoughts.\\n\\n## Credits\\n\\nPhoto by Markus Winkler on [Unsplash](https://unsplash.com/).\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tZC9ibG9nLzIwMjAtMDVfY3JlYXRpbmctYS1jaHJvbWUtZXh0ZW5zaW9uLm1kP2Y3YzQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSwwcEpBQTJsSiwwS0FBMEssdUVBQXVFLGtDQUFrQyw2RUFBNkUsK0JBQStCLDRDQUE0QyxpQkFBaUIsOEtBQThLLHdDQUF3QyxzMkVBQXMyRSwwSkFBMEosMkRBQTJELHdCQUF3QixLQUFLLEdBQUcsRUFBRSxvS0FBb0ssbUNBQW1DLHFFQUFxRSxhQUFhLEVBQUUsaUhBQWlILHNCQUFzQixjQUFjLElBQUksNkZBQTZGLHFCQUFxQix1QkFBdUIsS0FBSyxPQUFPLDZGQUE2RixLQUFLLElBQUksa0NBQWtDLDBGQUEwRixvQ0FBb0Msa0JBQWtCLG9EQUFvRCxLQUFLLEVBQUUsSUFBSSx5Q0FBeUMsMEhBQTBILGNBQWMsK0NBQStDLG9CQUFvQixZQUFZLDhDQUE4QyxLQUFLLHFHQUFxRyxJQUFJLDhDQUE4QywyR0FBMkcsOERBQThELGFBQWEsc0JBQXNCLHlDQUF5Qyw0QkFBNEIsRUFBRSxLQUFLLFNBQVMsSUFBSSxnUEFBZ1AscUNBQXFDLGdDQUFnQyxLQUFLLEdBQUcsRUFBRSw2QkFBNkIsdUdBQXVHLGdEQUFnRCxtRUFBbUUsK0NBQStDLElBQUksbURBQW1ELGlFQUFpRSxJQUFJLCtmQUErZix1QkFBdUIsb0NBQW9DLGtCQUFrQixvQ0FBb0Msc0NBQXNDLHNCQUFzQixjQUFjLEtBQUssRUFBRSxJQUFJLHVDQUF1QyxxRkFBcUYsVUFBVSwyQ0FBMkMsSUFBSSwybEdBQTJsRyIsImZpbGUiOiIuL21kL2Jsb2cvMjAyMC0wNV9jcmVhdGluZy1hLWNocm9tZS1leHRlbnNpb24ubWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIi0tLVxcbnRpdGxlOiBcXFwiQ3JlYXRpbmcgYSBDaHJvbWUgZXh0ZW5zaW9uXFxcIlxcbmV4Y2VycHQ6IFxcXCJJbiB0aGlzIHBvc3QsIEkgd2lsbCBzaG93IHlvdSBob3cgdG8gY3JlYXRlIGEgc2ltcGxlIENocm9tZSBleHRlbnNpb24sIHVzaW5nIGp1c3QgSmF2YVNjcmlwdCwgSFRNTCBhbmQgQ1NTLiBJIHdpbGwgYWxzbyBzdW1tYXJpemUgYWxsIHdoYXQgYSBDaHJvbWUgZXh0ZW5zaW9uIGNhbiBkbywgYW5kIEkgd2lsbCBpbnRyb2R1Y2UgaG93IHRvIGNyZWF0ZSBtb3JlIGNvbXBsZXggZXh0ZW5zaW9ucyBiYXNlZCBvbiBtb2Rlcm4gSmF2YVNjcmlwdCBmcmFtZXdvcmtzIGxpa2UgUmVhY3QsIEFuZ3VsYXIgb3IgVnVlLlxcXCJcXG5wdWJsaXNoZWQ6IHRydWVcXG5kYXRlUHVibGlzaGVkOiAxNTkwOTk0ODAwMDAwXFxuZGF0ZTogXFxcIjIwMjAtMDYtMDFUMDk6MDA6MDAuMDAwWlxcXCJcXG5hdXRob3I6IEp1YW5ndWkgSm9yZMOhblxcbnRhZ3M6XFxuICAtIERhbiBBYnJhbW92XFxuYXV0aG9yUGhvdG86IC9pbWcvYXV0aG9ycy9qZ3VpeC5qcGVnXFxuYmFubmVyUGhvdG86IFxcXCIvaW1nL2Jsb2cvMjAyMC0wNV9jcmVhdGluZy1hLWNocm9tZS1leHRlbnNpb24vY3JlYXRpbmctYS1jaHJvbWUtZXh0ZW5zaW9uLmpwZ1xcXCJcXG50aHVtYm5haWxQaG90bzogXFxcIi9pbWcvYmxvZy8yMDIwLTA1X2NyZWF0aW5nLWEtY2hyb21lLWV4dGVuc2lvbi9jcmVhdGluZy1hLWNocm9tZS1leHRlbnNpb24uanBnXFxcIlxcbmNhbm9uaWNhbFVybDogaHR0cHM6Ly9qdWFuZ3Vpam9yZGFuLmNvbS9ibG9nLzIwMjAtMDVfY3JlYXRpbmctYS1jaHJvbWUtZXh0ZW5zaW9uXFxuLS0tXFxuXFxuSW4gdGhpcyBwb3N0LCBJIHdpbGwgc2hvdyB5b3UgaG93IHRvIGNyZWF0ZSBhIHNpbXBsZSBbQ2hyb21lIGV4dGVuc2lvbl0oaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9jYXRlZ29yeS9leHRlbnNpb25zKS4gSSB3aWxsIGFsc28gc3VtbWFyaXplIHdoYXQgYSBDaHJvbWUgZXh0ZW5zaW9uIGNhbiBkbywgYW5kIEkgd2lsbCBpbnRyb2R1Y2UgaG93IHRvIGNyZWF0ZSBtb3JlIGNvbXBsZXggZXh0ZW5zaW9ucyBiYXNlZCBvbiBtb2Rlcm4gSmF2YVNjcmlwdCBmcmFtZXdvcmtzIGxpa2UgUmVhY3QsIEFuZ3VsYXIgb3IgVnVlLlxcblxcbldoYXQgaXMgYSBDaHJvbWUgZXh0ZW5zaW9uPyBHb29nbGUgQ2hyb21lIGV4dGVuc2lvbnMgYXJlIGxpa2Ugc21hbGwgYXBwbGljYXRpb25zIGxpdmluZyBpbiB5b3VyIGJyb3dzZXIsIGJhc2VkIG9uIHN0YW5kYXJkIHdlYiB0ZWNobm9sb2dpZXMsIHN1Y2ggYXMgSFRNTCwgQ1NTIGFuZCBKYXZhU2NyaXB0LiBUaGV5IHRha2UgYWR2YW50YWdlIG9mIHNvbWUgQ2hyb21lIEFQSXMsIHByb3ZpZGluZyB0aGUgZm91bmRhdGlvbnMgZm9yIGJ1aWxkaW5nIGFuIGFwcCwgbGlrZSBzdG9yYWdlIGFuZCBtZXNzYWdpbmcuIEdvb2dsZSBDaHJvbWUgZXh0ZW5zaW9ucyBjYW4gaW50ZXJhY3Qgd2l0aCB0aGUgd2ViIHBhZ2VzIG9wZW4gaW4geW91ciBicm93c2VyIHRhYnMsIGJ1dCB0aGV5IGFyZSBub3QgcmVhbGx5IG1lYW50IHRvLiBUaGV5IGNhbiBsaXZlIG9uIHRoZWlyIG93biBhbmQgcHJvdmlkZSBhbnkga2luZCBvZiBmdW5jdGlvbmFsaXR5LCBzZXBhcmF0ZSBmcm9tIHRoZSBicm93c2luZyBleHBlcmllbmNlLiBZb3UgY2FuIGJ1aWxkIGFueXRoaW5nLCBmcm9tIGFuIGFnZW5kYSwgdG8gYSBwb21vZG9ybyB0aW1lciwgdG8gYSB3ZWIgaW1hZ2Ugc2NyYXBwZXIuIFlvdSBjYW4gdGhpbmsgb2YgQ2hyb21lIGFzIHRoZSBFbGVjdHJvbiBwbGF0Zm9ybSwgcHJvdmlkaW5nIGEgYmFzaXMgZm9yIGJ1aWxkaW5nIEphdmFTY3JpcHQgYXBwbGljYXRpb25zIHRoYXQgY2FuIGludGVyYWN0IHdpdGggdGhlIGJyb3dzaW5nIGV4cGVyaWVuY2UuXFxuXFxuQ2hyb21lIGV4dGVuc2lvbnMgY2FuIHN0YXkgZG9ybWFudCB1bnRpbCBzb21lIHRyaWdnZXIgYXdha2VzIHRoZW0sIG1ha2luZyBzb21lIGNvbnRlbnQgb3Igc2NyaXB0IHRvIGJlIGluamVjdGVkLCBleGVjdXRlZCwgb3Igc29tZSBwb3B1cCBzaG93bi4gVGhlc2Ugc2NyaXB0cyBsaXZlIGluIHNvbWV0aGluZyBjYWxsZWQg4oCcSXNvbGF0ZWQgV29ybGRz4oCdIGluIHJlbGF0aW9uIHdpdGggdGhlIHdlYiBwYWdlcyBiZWluZyBicm93c2VkLCB3aGljaCBtZWFucyB0aGF0IGEgQ2hyb21lIGV4dGVuc2lvbiBjYW4gb25seSBzaGFyZSB0aGUgRE9NIHdpdGggYSBwYXJ0aWN1bGFyIHBhZ2UsIGJ1dCBub3QgdGhlIHNjcmlwdCB2YXJpYWJsZXMgb3IgZnVuY3Rpb25zLiBDaHJvbWUgZXh0ZW5zaW9ucyBjYW4gdGh1cyBtb2RpZnkgdGhlIERPTSwgaW5qZWN0IGFkZGl0aW9uYWwgQ1NTIG9yIEphdmFTY3JpcHQgc2NyaXB0cyB3aGljaCBpbnRlcmFjdCB3aXRoIHRoZSBzYW1lIERPTSwgYnV0IGNhbiBub3QgZGlyZWN0bHkgbW9kaWZ5IHRoZSBvcmlnaW5hbCBwYWdlIENTUyBvciBKYXZhU2NyaXB0LiBPbiB0aGUgb3RoZXIgaGFuZCwgdGhlIGV4dGVuc2lvbnMgY2FuIGNvbW11bmljYXRlIHdpdGggdGhlIHBhZ2UgdGhyb3VnaCBtZXNzYWdlcywgc28geW91IGNhbiBjcmVhdGUgYSBwYWdlIHRoYXQgZ3JhY2VmdWxseSBpbnRlcmFjdCB3aXRoIGEgQ2hyb21lIGV4dGVuc2lvbi5cXG5cXG4jIyBFeHRlbnNpb24gY2FwYWJpbGl0aWVzXFxuXFxuVGhpcyBpcyBhbiBpbmNvbXBsZXRlIHN1bW1hcnkgb2Ygd2hhdCBhbiBleHRlbnNpb24gY2FuIGRvOlxcblxcbi0gKipTaG93IGFuIGljb24qKi4gVGhlIGV4dGVuc2lvbiBpY29uIGNhbiBiZSBtb2RpZmllZCBvbiBydW50aW1lLCBvciBzaG93IGEgYmFkZ2Ugb3ZlciBpdCwgd2l0aCBhIGNvbG9yZWQgYmFja2dyb3VuZCBhbmQgYSA0IGxldHRlciB0ZXh0IGluIGl0Llxcbi0gKipTaG93IGEgcG9wdXAqKi4gQ2xpY2tpbmcgb24gdGhlIGV4dGVuc2lvbiBpY29uIGNhbiB0cmlnZ2VyIGEgcG9wdXAgd2l0aCBjb250ZW50Llxcbi0gKipTaG93IGEgc2Vjb25kYXJ5IG1lbnUqKi4gUmlnaHQgY2xpY2tpbmcgb24gdGhlIGV4dGVuc2lvbiBpY29uIGNhbiB0cmlnZ2VyIGEgc2Vjb25kYXJ5IG1lbnUuXFxuLSAqKlJlc3BvbmQgdG8gc2hvcnRjdXRzKiouIEtleWJvYXJkIHNob3J0Y3V0cyBjYW4gYmUgYXNzb2NpYXRlZCB0byBleHRlbnNpb24gYWN0aW9ucyAoaS5lLiBDVFJMK1NISUZUK1YpLlxcbi0gKipSZXNwb25kIHRvIGFjdGlvbnMgaW4gdGhlIFVSTCBiYXIqKiAodGhlIHNvIGNhbGxlZCBvbW5pYm94KS4gVGV4dCBzaG9ydGN1dHMgY2FuIGJlIHVzZWQgaW4gdGhlIG9tbmlib3ggdG8gdHJpZ2dlciBhY3Rpb25zIGluIHRoZSBleHRlbnNpb24gKGkuZS4g4oCcbXlleHQrPFRBQj5cXFwiKS5cXG4tICoqUmVzcG9uZCB0byB2aXNpdGluZyBzb21lIHdlYiBwYWdlKiouIEZvciBpbnN0YW5jZSwgbW9kaWZ5aW5nIHRoZSBpY29uIHN0YXRlIG9yIHBvcHVwIGNvbnRlbnQuXFxuICBNb2RpZnkgdGhlIGNvbnRlbnQgb2YgYSB3ZWIgc2l0ZS4gRm9yIGluc3RhbmNlLCBtb2RpZnlpbmcgdGhlIERPTSBieSBhIGNvbnRlbnQgc2NyaXB0IG9yIGFwcGx5aW5nIGFkZGl0aW9uYWwgQ1NTIGZpbGVzLlxcbi0gKipIYXZlIGFuIE9wdGlvbnMgcGFnZSoqIGZvciB0aGUgZXh0ZW5zaW9uIGNvbmZpZ3VyYXRpb24uXFxuLSAqKlJlcGxhY2UgdGhlIEhpc3RvcnkgcGFnZSwgQm9va21hcmtzIHBhZ2Ugb3IgTmV3IFRhYiBwYWdlKiogb2YgR29vZ2xlIENocm9tZS5cXG4tICoqRXhjaGFuZ2luZyBtZXNzYWdlcyoqIHdpdGggYSB3ZWIgc2l0ZSBvciB3aXRoIGl0c2VsZi4gQSBleHRlbnNpb24gY2FuIHVzZSBtZXNzYWdpbmcgdG8gdGFsayB0byBzb21lIHdlYiBwYWdlIGJlaW5nIGJyb3dzZWQsIG9yIHRvIGNvbW11bmljYXRlIGJldHdlZW4gcGFydHMgb2YgdGhlIGV4dGVuc2lvbiBpdHNlbGYuXFxuLSAqKlN0b3JlIGluZm9ybWF0aW9uKiogaW4gbG9jYWwgc3RvcmFnZSwgQ2hyb21lIHN0b3JhZ2UgKHN0b3JhZ2Ugd2hpY2ggaXMgc3luY2hyb25pemVkIGFjcm9zcyBkaWZmZXJlbnQgZGV2aWNlcyB3aGVyZSB0aGUgdXNlciBpcyBsb2dnZWQgaW4pIG9yIGFueSBzdG9yYWdlIG5hdGl2ZSB0byBKUywgZm9yIGluc3RhbmNlIHNlc3Npb25TdG9yYWdlLlxcbi0gKipTaG93IG5vdGlmaWNhdGlvbnMqKiBhcyBhIHRvYXN0Llxcbi0gKipVc2Ugc2V2ZXJhbCBBUElzIHByb3ZpZGVkIGJ5IEdvb2dsZSBDaHJvbWUqKi5cXG4tICoqQmUgZnJlZSBvciBwYWlkKiouIFdoZW4gY3JlYXRpbmcgYSBwYWlkIGV4dGVuc2lvbiwgeW91IGNhbiBjaG9vc2UgdG8gdXNlIHRoZSBDaHJvbWUgc3RvcmUgb3IgeW91ciBvd24gcGF5bWVudCBtZWFucy5cXG5cXG4jIyBUaGUgYmFzaWNzXFxuXFxuVGhlIG9ubHkgbWFuZGF0b3J5IGZpbGUgb2YgYSBDaHJvbWUgZXh0ZW5zaW9uIGlzIHRoZSBtYW5pZmVzdC4gSXQgaGFzIHRvIGJlIHBsYWNlZCBpbiB0aGUgcm9vdCBkaXJlY3RvcnksIGFuZCBpdCBjb21tdW5pY2F0ZXMgdGhlIGV4dGVuc2lvbiBtZXRhZGF0YSwgcGVybWlzc2lvbnMgYW5kIG90aGVyIGZpbGVzIGludm9sdmVkLlxcblxcblRoZSBtYW5pZmVzdCBmb3JtYXQgaGFzIGEgbG90IG9mIG9wdGlvbnMsIHdoaWNoIGNhbiBiZSBja2Vja2VkIGluIHRoaXMgcGFnZSAoaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9leHRlbnNpb25zL21hbmlmZXN0KSwgYnV0IHdlIHdpbGwgZm9jdXMgb24gdGhlIG1vc3QgaW1wb3J0YW50IG9uZXMuIExldOKAmXMgaW50cm9kdWNlIHRoZSBDYXQgZGV0ZWN0b3IgZXh0ZW5zaW9uIG1hbmlmZXN0OuKAi1xcblxcbmBgYGpzb25cXG57XFxuICBcXFwibmFtZVxcXCI6IFxcXCJDYXQgZGV0ZWN0b3JcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlNwb3RzIGNhdHMgaW4gdGhlIHBhZ2UgeW91IGFyZSBicm93c2luZ1xcXCIsXFxuICBcXFwibWFuaWZlc3RfdmVyc2lvblxcXCI6IDIsXFxuICBcXFwidmVyc2lvblxcXCI6IFxcXCIxLjBcXFwiLFxcbiAgXFxcImJhY2tncm91bmRcXFwiOiB7XFxuICAgIFxcXCJwZXJzaXN0ZW50XFxcIjogZmFsc2UsXFxuICAgIFxcXCJzY3JpcHRzXFxcIjogW1xcXCJiYWNrZ3JvdW5kLmpzXFxcIl1cXG4gIH0sXFxuICBcXFwiY29udGVudF9zY3JpcHRzXFxcIjogW1xcbiAgICB7XFxuICAgICAgXFxcIm1hdGNoZXNcXFwiOiBbXFxcIjxhbGxfdXJscz5cXFwiXSxcXG4gICAgICBcXFwianNcXFwiOiBbXFxcImNvbnRlbnQuanNcXFwiXVxcbiAgICB9XFxuICBdLFxcbiAgXFxcImJyb3dzZXJfYWN0aW9uXFxcIjoge1xcbiAgICBcXFwiZGVmYXVsdF9wb3B1cFxcXCI6IFxcXCJwb3B1cC5odG1sXFxcIlxcbiAgfSxcXG4gIFxcXCJpY29uc1xcXCI6IHtcXG4gICAgXFxcIjE2XFxcIjogXFxcImltYWdlcy9mb290cHJpbnQtMTYucG5nXFxcIixcXG4gICAgXFxcIjMyXFxcIjogXFxcImltYWdlcy9mb290cHJpbnQtMzIucG5nXFxcIixcXG4gICAgXFxcIjQ4XFxcIjogXFxcImltYWdlcy9mb290cHJpbnQtNDgucG5nXFxcIixcXG4gICAgXFxcIjEyOFxcXCI6IFxcXCJpbWFnZXMvZm9vdHByaW50LTEyOC5wbmdcXFwiXFxuICB9LFxcbiAgXFxcInBlcm1pc3Npb25zXFxcIjogW1xcXCJhY3RpdmVUYWJcXFwiXVxcbn1cXG5gYGBcXG5cXG5UaGUgbWFuaWZlc3QgZGVjbGFyZXMgc29tZSBjYXBhYmlsaXRpZXMgdGhhdCB3aWxsIGJlIHVzZWQgYnkgdGhlIGV4dGVuc2lvbjpcXG5cXG4tIEl0IGRlY2xhcmVzIGEgYmFja2dyb3VuZCBzY3JpcHQuIEJhY2tncm91bmQgc2NyaXB0cyBjYW4gYWN0aXZhdGUgYXQgYW55IHRpbWUsIGJ1dCBkb24ndCBoYXZlIGRpcmVjdCBhY2Nlc3MgdG8gdGhlIHRhYnMgY29udGVudC5cXG4tIEl0IGRlY2xhcmVzIGEgY29udGVudCBzY3JpcHQuIENvbnRlbnQgc2NyaXB0cyBnZXQgaW5qZWN0ZWQgaW4gdGhlIHNhbWUgcGFnZSB0aGF0IGlzIGJlaW5nIGJyb3dzZWQgYW5kIGhhdmUgYWNjZXNzIHRvIHRoZSBjb250ZW50LiBBIG1hdGNoZXMgZXhwcmVzc2lvbiBpcyB1c2VkIHRvIGRldGVybWluZSB3aGVuIHRoZSBzY3JpcHQgaXMgaW5qZWN0ZWQuIEluIHRoaXMgY2FzZSB3ZSBjaG9zZSBgPGFsbCB1cmxzPmAsIG1lYW5pbmcgaXQgd2lsbCBiZSBpbmplY3RlZCBpbiBhbnkgd2ViIHBhZ2UuXFxuLSBJdCBkZWNsYXJlcyBhIGJyb3dzZXIgYWN0aW9uLCBtZWFuaW5nIGEgZXh0ZW5zaW9uIHRoYXQgaXMgYWJsZSB0byB3b3JrIGluZGVwZW5kZW50bHkgb2YgdGhlIGN1cnJlbnQgYnJvd3NlZCBwYWdlLiBJZiB3ZSB3YW50ZWQgdG8gY3JlYXRlIGEgZXh0ZW5zaW9uIHRoYXQgb25seSBhY3RpdmF0ZXMgd2hlbiBzb21lIGNvbmRpdGlvbnMgYXJlIG1ldCBpbiB0aGUgcGFnZSB5b3UgYXJlIGJyb3dzaW5nLCB3ZSB3b3VsZCB1c2UgYSBcXFwicGFnZSBhY3Rpb27igJ0uIFRoZSByZWFzb24gd2UgY2hvc2UgYnJvd3NlciBhY3Rpb24gaXMgdGhhdCBjYXRzIGNhbiBiZSBzZWVuIGFsbW9zdCBldmVyeXdoZXJlIG9uIHRoZSBpbnRlcm5ldC4gQSBzZWNvbmQgcmVhc29uIGlzIHRoYXQgd2Ugd2FudCB0byBkaXNwbGF5IGEgYmFkZ2Ugb3ZlciB0aGUgZXh0ZW5zaW9uIGljb24sIGFuZCB0aGF0IGlzIG9ubHkgcG9zc2libGUgdXNpbmcgYSBicm93c2VyIGFjdGlvbi5cXG4tIEluc2lkZSB0aGUgYnJvd3NlciBhY3Rpb24sIGl0IGRlY2xhcmVzIGEgcG9wdXAgdGhhdCB3aWxsIGJlIG9wZW4gb24gY2xpY2tpbmcgb24gdGhlIGV4dGVuc2lvbiBpY29uLlxcbi0gSXQgZGVjbGFyZXMgaWNvbnMuIFRoZSBzbWFsbGVyIG9uZXMgdXNlZCBmb3IgdGhlIGJyb3dzZXIgaWNvbiwgZGVwZW5kaW5nIG9uIHRoZSBkaXNwbGF5IHJlc29sdXRpb24sIGFuZCB0aGUgYmlnZ2VyIG9uZXMgdXNlZCBpbiB0aGUgZXh0ZW5zaW9ucyBtZW51IG9mIENocm9tZSBhbmQgdGhlIENocm9tZSBTdG9yZS5cXG5cXG4jIyBPdXIgc2FtcGxlIGV4dGVuc2lvblxcblxcbk5vdywgZ2V0dGluZyB0byB0aGUgcG9pbnQgb2YgdGhpcyBwb3N0LiBUaGlzIHBhZ2UgYWN0aW9uIHVzZXMgYSBiYWNrZ3JvdW5kIHNjcmlwdCB0aGF0LCBvbiBwYWdlIGxvYWQsIGNhbGxzIHNlbmRzIGEgbWVzc2FnZSB0byB0aGUgY29udGVudCBzY3JpcHQsIHdoaWNoIGluIHR1cm4gY291bnRzIHRoZSBudW1iZXIgb2YgdGltZXMgdGhlIHdvcmRzIOKAnGNhdOKAnSwg4oCca2l0dGVu4oCdIG9yIOKAnGtpdHR54oCdIGFwcGVhciBpbiBvdXIgcGFnZS4gQWZ0ZXIgcmVjZWl2aW5nIGEgcmVzcG9uc2UsIHRoZSBiYWNrZ3JvdW5kIHRhc2sgZGlzcGxheXMgYSBiYWRnZSBvdmVyIHRoZSBpY29uIHRvIGNvbW11bmljYXRlIHRoZSBudW1iZXIgb2Yga2l0dGVucyBzcG90LiBPbiBjbGlja2luZyBvbiB0aGUgZXh0ZW5zaW9uIGljb24sIGEgcG9wdXAgd2lsbCBiZSBzaG93biBzaG93aW5nIGEgaGFwcHkga2l0dGVuIGltYWdlIHRvZ2V0aGVyIHdpdGggdGhlIGNvdW50ZXIuXFxuXFxuTGV04oCZcyBwcmVzZW50IG91ciBleHRlbnNpb24gZmlsZSBzdHJ1Y3R1cmU6XFxuXFxuYGBgXFxuLWF1ZGlvc1xcbiB8LW1lb3dfMC5tcDNcXG4gfC1tZW93XzEubXAzXFxuIHwtbWVvd18yLm1wM1xcbiB8LW1lb3dfMy5tcDNcXG4gfC1tZW93XzQubXAzXFxuIHwtbWVvd181Lm1wM1xcbiB8LW1lb3dfNi5tcDNcXG4taW1hZ2VzXFxuIHwtZm9vdHByaW50LTE2LnBuZ1xcbiB8LWZvb3RwcmludC0zMi5wbmdcXG4gfC1mb290cHJpbnQtNDgucG5nXFxuIHwtZm9vdHByaW50LTEyOC5wbmdcXG4tYmFja2dyb3VuZC5qc1xcbi1jb250ZW50LmpzXFxuLW1hbmlmZXN0LmpzXFxuLXBvcHVwLmh0bWxcXG4tcG9wdXAuanNcXG5gYGBcXG5cXG5JdCBpbmNsdWRlcyB0aGUgZXh0ZW5zaW9uIGljb25zLCBzb21lIGF1ZGlvIGZpbGVzLCB0aGUgbWFuaWZlc3QsIHRoZSBiYWNrZ3JvdW5kIHNjcmlwdCwgdGhlIGNvbnRlbnQgc2NyaXB0LCBhbmQgdGhlIHBvcHVwIGh0bWwgYW5kIGpzIGZpbGVzLlxcblxcblRoaXMgaXMgaG93IHRoZSBiYWNrZ3JvdW5kIHNjcmlwdCBsb29rcyBsaWtlLiBDb21tZW50cyBoYXZlIGJlZW4gaW5jbHVkZWQgdG8gZ3VpZGUgeW91IHRocm91Z2ggdGhlIGltcG9ydGFudCBzdHVmZjpcXG5cXG5gYGBcXG5jb25zdCBtYXhNZW93cyA9IDY7XFxuXFxuLy8gVGhlIGV4dGVuc2lvbiBsaXN0ZW5zIHRvIHRoZSBvblVwZGF0ZWQgZXZlbnQsIGFuZCBleGVjdXRlcyB3aGVuIHRoZSBwYWdlIGlzIGxvYWRlZFxcbmNocm9tZS50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcigodGFiSWQsIGNoYW5nZUluZm8sIHRhYikgPT4ge1xcbiAgaWYgKGNoYW5nZUluZm8uc3RhdHVzID09PSBcXFwiY29tcGxldGVcXFwiICYmIHRhYi5hY3RpdmUpIHtcXG4gICAgZGV0ZWN0Q2F0cyh0YWJJZCk7XFxuICB9XFxufSk7XFxuXFxuLy8gSXQgZXhlY3V0ZXMgdGhlIGNhdCBkZXRlY3Rpb24gYXMgd2VsbCB3aGVuIHdlIHN3aXRjaCB0YWJzIG9uIHRoZSBhY3RpdmUgdGFiXFxuY2hyb21lLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIoKGFjdGl2ZVRhYikgPT4gZGV0ZWN0Q2F0cyhhY3RpdmVUYWIudGFiSWQpKTtcXG5cXG5jb25zdCBkZXRlY3RDYXRzID0gKHRhYklkKSA9PiB7XFxuICAvLyBIZXJlIHdlIGNsZWFyIHRoZSBiYWRnZVxcbiAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VUZXh0KHsgdGV4dDogXFxcIlxcXCIgfSk7XFxuICAvLyBUaGVuIHdlIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBjb250ZW50IHNjcmlwdCwgdG9nZXRoZXIgd2l0aCBhIGNhbGxiYWNrXFxuICBjaHJvbWUudGFicy5zZW5kTWVzc2FnZSh0YWJJZCwgeyB0ZXh0OiBcXFwiY2F0X2NvdW50XFxcIiB9LCBvbkNhdENvdW50KTtcXG59O1xcblxcbi8vIFRoaXMgaXMgdGhlIGNhbGxiYWNrIGNhbGxlZCBieSB0aGUgY29udGVudCBzY3JpcHRcXG5jb25zdCBvbkNhdENvdW50ID0gKGNhdE51bWJlcikgPT4ge1xcbiAgaWYgKCFjYXROdW1iZXIpIHtcXG4gICAgZGVhY3RpdmF0ZUljb24oKTtcXG4gIH0gZWxzZSB7XFxuICAgIC8vIFdoZW4gY2F0cyBhcmUgZGV0ZWN0ZWQsIHNob3cgYW4gYW5pbWF0aW9uIG9uIHRoZSBiYWRnZVxcbiAgICBhbmltYXRlQmFkZ2UoY2F0TnVtYmVyKTtcXG4gIH1cXG59O1xcblxcbmNvbnN0IGRlYWN0aXZhdGVJY29uID0gKCkgPT4ge1xcbiAgLy8gSGVyZSB3ZSBkZXRlY3Qgd2hhdCB0aGUgYWN0aXZlIHRhYiBpcyBhbmQgZGlzYWJsZSB0aGUgYWN0aW9uXFxuICBjaHJvbWUudGFicy5xdWVyeSh7IGFjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZSB9LCAoYWN0aXZlVGFiKSA9PiB7XFxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLmRpc2FibGUoYWN0aXZlVGFiWzBdLmlkKTtcXG4gIH0pO1xcbn07XFxuXFxuY29uc3QgYW5pbWF0ZUJhZGdlID0gKGNhdE51bWJlcikgPT4ge1xcbiAgLy8gTGltaXQgbWVvd3MsIHdlIGRvbid0IHdhbnQgMTAwMCBzb3VuZHMgdG8gYmUgcGxheWVkXFxuICBsZXQgaSA9IGNhdE51bWJlciAtIG1heE1lb3dzID4gMCA/IGNhdE51bWJlciAtIG1heE1lb3dzIDogMTtcXG4gIGxldCBqID0gMDtcXG4gIC8vIENhdHMgd2lsbCBtZW93IGF0IHJhbmRvbSB0aW1lc1xcbiAgZm9yICg7IGkgPD0gY2F0TnVtYmVyIC0gMTsgaSsrLCBqKyspIHtcXG4gICAgdXBkYXRlQmFkZ2UoaSwgaiAqIE1hdGgucmFuZG9tKCkgKiA0MDApO1xcbiAgfVxcbiAgLy8gTGFzdCBjYXQgc2hvdWxkIGNvbWUgbGFzdCwgbGV0J3MgZ2l2ZSBpdCB0aGUgaGlnaGVzdCBkZWxheVxcbiAgdXBkYXRlQmFkZ2UoY2F0TnVtYmVyLCBqICogNTAwKTtcXG59O1xcblxcbmNvbnN0IHVwZGF0ZUJhZGdlID0gKGNhdEluZGV4LCBkZWxheSkgPT4ge1xcbiAgLy8gQWZ0ZXIgc29tZSBzcGVjaWZpZWQgZGVsYXkgZGlzcGxheSBhIG51bWJlciBvbiB0aGUgYmFkZ2UgYW5kIHBsYXkgYSBtZW93IHNvdW5kXFxuICBzZXRUaW1lb3V0KCgpID0+IHtcXG4gICAgKFxcbiAgICAgIG5ldyBBdWRpbyhjaHJvbWUucnVudGltZS5nZXRVUkwoYGF1ZGlvcy9tZW93XyR7Y2F0SW5kZXggJSA3fS5tcDNgKSlcXG4gICAgKS5wbGF5KCk7XFxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7IHRleHQ6IGNhdEluZGV4LnRvU3RyaW5nKCkgfSk7XFxuICB9LCBkZWxheSk7XFxufTtcXG5gYGBcXG5cXG5UaGUgY29udGVudCBzY3JpcHQgYmFzaWNhbGx5IHJlY2VpdmVzIHRoZSBgY2F0X2NvdW50YCBtZXNzYWdlIGFuZCByZXNwb25kcyB0byBpdC4gU29tZSBsb2dpYyBoYXMgYmVlbiBpbmNsdWRlZCB0byBjb3VudCB0aGUgY2F0cyB3aXRoIGEgcmVnZXggZXhwcmVzc2lvbjpcXG5cXG5gYGBcXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1zZywgc2VuZGVyLCBzZW5kUmVzcG9uc2UpID0+IHtcXG4gIGlmIChtc2cudGV4dCA9PT0gXFxcImNhdF9jb3VudFxcXCIpIHtcXG4gICAgc2VuZFJlc3BvbnNlKGNvdW50Q2F0cygpKTtcXG4gIH1cXG59KTtcXG5cXG5jb25zdCBjb3VudENhdHMgPSAoKSA9PiB7XFxuICB2YXIgY29udGVudCA9XFxuICAgIGRvY3VtZW50LmJvZHlbXFxcImlubmVyVGV4dFxcXCIgaW4gZG9jdW1lbnQuYm9keSA/IFxcXCJpbm5lclRleHRcXFwiIDogXFxcInRleHRDb250ZW50XFxcIl07XFxuICBjb250ZW50ID0gcmVtb3ZlU2NyaXB0c0Zyb21Db250ZW50KGNvbnRlbnQpO1xcbiAgdmFyIHJlZ2V4ID0gLyhjYXR8Y2F0c3xraXR0ZW58a2l0dGVuc3xraXR0eXxraXR0aWVzKVtcXFxccy4sXS9naTtcXG5cXG4gIHJldHVybiBjb250ZW50Lm1hdGNoKHJlZ2V4KT8ubGVuZ3RoIHx8IDA7XFxufTtcXG5cXG5jb25zdCByZW1vdmVTY3JpcHRzRnJvbUNvbnRlbnQgPSAoc3RyQ29kZSkgPT4ge1xcbiAgcmV0dXJuIHN0ckNvZGUucmVwbGFjZSgvPHNjcmlwdC4qPz4uKj88XFxcXC9zY3JpcHQ+L2dpbSwgXFxcIlxcXCIpO1xcbn07XFxuYGBgXFxuXFxuVGhlIHBvcHVwIGh0bWwgZmlsZSBqdXN0IGRpc3BsYXlzIGFuIGltYWdlIGFuZCBkZWNsYXJlcyB0aGUgamF2YXNjcmlwdCBmaWxlOlxcblxcbmBgYFxcbjxodG1sPlxcbiAgPGJvZHk+XFxuICAgIDxpbWcgaWQ9XFxcImNhdF9pbWFnZVxcXCIgLz5cXG4gICAgPHNjcmlwdCBzcmM9XFxcInBvcHVwLmpzXFxcIj48L3NjcmlwdD5cXG4gIDwvYm9keT5cXG48L2h0bWw+XFxuYGBgXFxuXFxuVGhlIHBvcHVwIGpzIGZpbGUgZXhlY3V0ZXMgYSBmdW5jdGlvbiBvbiBsb2FkIHdoaWNoIGluIHR1cm4gc2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBjb250ZW50IHNjcmlwdCB0byBjb3VudCBjYXRzIGFnYWluLiBUaGlzIGlzIGJlY2F1c2UgcG9wdXBzIGRvIG5vdCBsaXZlIHVudGlsIHRoZXkgYXJlIG9wZW4sIHNvIGlmIHNvbWUgdXBkYXRlIG9uIHRoZSBwb3B1cCBuZWVkcyB0byBiZSBkb25lLCBpdCBpcyB0aGUgcG9wdXAgd2hvIG5lZWRzIHRvIHN0YXJ0IHRoZSBhY3Rpb246XFxuXFxuYGBgXFxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcXG4gIGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0sIChhY3RpdmVUYWIpID0+IHtcXG4gICAgY29uc3QgdGFiSWQgPSBhY3RpdmVUYWJbMF0uaWQ7XFxuICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYklkLCB7IHRleHQ6IFxcXCJjYXRfY291bnRcXFwiIH0sIG9uQ2F0Q291bnQpO1xcbiAgfSk7XFxufTtcXG5cXG5jb25zdCBvbkNhdENvdW50ID0gKGNhdE51bWJlcikgPT4ge1xcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFxuICAgIFxcXCJjYXRfaW1hZ2VcXFwiXFxuICApLnNyYyA9IGBodHRwczovL2NhdGFhcy5jb20vYy9zLyR7Y2F0TnVtYmVyfSUyMGhhcHB5JTIwY2F0cyUyMGRldGVjdGVkP3Q9c3Emd2lkdGg9MzUwYDtcXG59O1xcbmBgYFxcblxcblRhZGFhYWEsIHRoaXMgaXMgdGhlIHJlc3VsdCBvZiB0aGUgY2F0IGRldGVjdG9yIGV4dGVuc2lvbiBpbiBhY3Rpb246XFxuXFxuIVtDYXQgZXh0ZW5zaW9uXSgvaW1nL2Jsb2cvMjAyMC0wNV9jcmVhdGluZy1hLWNocm9tZS1leHRlbnNpb24vY2F0X2V4dGVuc2lvbi5wbmcpXFxuXFxuIyMgVGVzdGluZyBsb2NhbGx5IG91ciBleHRlbnNpb25cXG5cXG5JZiB5b3Ugd2FudCB0byB0ZXN0IHlvdXIgZXh0ZW5zaW9uIGluIHlvdXIgbG9jYWwgbWFjaGluZSwgeW91IGp1c3QgbmVlZCB0byBnbyB0byB0aGUgbWVudSBpdGVtIE1vcmUgVG9vbHMg4oCUPiBFeHRlbnNpb25zLCB0aGVuIGNsaWNrIG9uIExvYWQgVW5wYWNrZWQsIGFuZCBzZWxlY3QgdGhlIGZvbGRlciB3aGVyZSB5b3VyIG1hbmlmZXN0IGFuZCB0aGUgcmVzdCBvZiB0aGUgZmlsZXMgYXJlLlxcblxcbiFbTG9hZGluZyB0aGUgZXh0ZW5zaW9uIGZvciB0ZXN0aW5nXSgvaW1nL2Jsb2cvMjAyMC0wNV9jcmVhdGluZy1hLWNocm9tZS1leHRlbnNpb24vbG9hZF9leHRlbnNpb24ucG5nKVxcblxcbiMjIERlYnVnZ2luZ1xcblxcbkRlYnVnZ2luZyBnZXRzIHBhcnRpY3VsYXJseSBjb21wbGV4IHNpbmNlIGV2ZXJ5IGJpdCBvZiBhIGV4dGVuc2lvbiBoYXMgdG8gYmUgaW5zcGVjdGVkIGluIGEgZGlmZmVyZW50IHdheS5cXG5cXG5SZWdhcmRpbmcgdGhlIGJhY2tncm91bmQgc2NyaXB0cywgdGhleSBhcmUgaW5zcGVjdGVkIGluIHRoZSBleHRlbnNpb25zLiBUbyBvcGVuIHRoZSBkZXYgdG9vbHMgeW91IG5lZWQgdG8gY2xpY2sgb24gdGhlIGJhY2tncm91bmQgcGFnZSBsaW5rIGluIHRoZSBleHRlbnNpb24gZGV0YWlscy5cXG5cXG4hW09wZW5pbmcgdGhlIGV4dGVuc2lvbiBkZXYgdG9vbHNdKC9pbWcvYmxvZy8yMDIwLTA1X2NyZWF0aW5nLWEtY2hyb21lLWV4dGVuc2lvbi9leHRlbnNpb25faW5mby5wbmcpXFxuXFxuQ29udGVudCBzY3JpcHRzIGFyZSBpbnNwZWN0ZWQgaW4gdGhlIHdlYiBwYWdlIHRoYXQgeW91IGFyZSBicm93c2luZywgc2luY2UgdGhleSBhcmUgaW5qZWN0ZWQgdG8gdGhlIHBhZ2UuIFRoZXkgYXJlIHNob3duIGluIGEgKipDb250ZW50IFNjcmlwdHMqKiB0YWIuXFxuXFxuIVtEZWJ1Z2dpbmcgY29udGVudCBzY3JpcHRzXSgvaW1nL2Jsb2cvMjAyMC0wNV9jcmVhdGluZy1hLWNocm9tZS1leHRlbnNpb24vZGVidWdnaW5nX2NvbnRlbnRfc2NyaXB0cy5wbmcpXFxuXFxuSSBjb3VsZCBub3QgZm91bmQgdGhlIHdheSB0byBpbnNwZWN0IHBvcHVwIHNjcmlwdHMsIGV2ZW4gdGhlIGNvbnNvbGUgbG9ncyBnb3QgbG9zdCBzb21ld2hlcmUsIHNvIHNob3dpbmcgYW4gYWxlcnQgd2FzIHRoZSBvbmx5IHdheSB0byBjaGVjayB0aGF0IHRoZSBwb3B1cCB3YXMgYWxpdmUgYW5kIGRvaW5nIHN0dWZmLlxcblxcbiMjIFB1Ymxpc2hpbmdcXG5cXG5UbyBwdWJsaXNoIGEgR29vZ2xlIENocm9tZSBleHRlbnNpb24geW91IG5lZWQgdG8gcmVnaXN0ZXIgYXMgYSBDaHJvbWUgZGV2ZWxvcGVyLCBwYXkgXFxcXCQ1IGFuZCBmaWxsIGluIHNvbWUgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBleHRlbnNpb24gbmFtZSwgZGVzY3JpcHRpb24gYW5kIGltYWdlcyBvciB2aWRlb3MuIFRoZSBwcm9jZXNzIGlzIHZlcnkgc2ltaWxhciB0aGFuIHRoZSBvbmUgZm9sbG93ZWQgdG8gcHVibGlzaCBhbiBhcHAgaW4gR29vZ2xlIFBsYXkuIEFmdGVyIHN1Ym1pdHRpbmcgeW91ciBleHRlbnNpb24gZm9yIGFwcHJvdmFsLCB5b3UgbmVlZCB0byB3YWl0IGZvciBhIHJlc3BvbnNlLiBOZWdhdGl2ZSByZXNwb25zZXMgYXJlIHF1aXRlIGZhc3QgLW15IGZpcnN0IGV4dGVuc2lvbiB3YXMgcmVqZWN0ZWQgZm9yIG5vIHJlYXNvbiwgYW5kIEkgaGFkIHRvIHNlbmQgYW4gZW1haWwgdG8gYXNrIGZvciBhIGh1bWFuIHJldmlldy0sIHBvc2l0aXZlIG9uZXMgY2FuIHRha2UgYSBmZXcgaG91cnMgb3IgZGF5cy5cXG5cXG4jIyBHb2luZyBmdXJ0aGVyXFxuXFxuVGhlIENocm9tZSBkZXZlbG9wZXIgc2l0ZSBmb3IgZXh0ZW5zaW9ucyBwcm92aWRlcyBhIGdyZWF0IG51bWJlciBvZiBzYW1wbGUgZXh0ZW5zaW9ucy4gVGhlc2UgYXJlIHNpbXBsZSBleHRlbnNpb25zIHRhY2tsaW5nIHZlcnkgc3BlY2lmaWMgZmVhdHVyZXMgdGhhdCBjYW4gaGVscCB5b3UgbGVhcm4gYnVpbGQgZXh0ZW5zaW9ucy5cXG5cXG5odHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2V4dGVuc2lvbnMvc2FtcGxlc1xcblxcblRoZXJlIGFyZSBtYW55IGJvaWxlcnBsYXRlIHByb2plY3RzIG91dCB0aGVyZSB0byBoZWxwIHlvdSBkZXZlbG9wIG1vcmUgY29tcGxleCBleHRlbnNpb25zIHVzaW5nIFJlYWN0LCBBbmd1bGFyIG9yIFZ1ZS4gVGFrZSB0aGUgZm9sbG93aW5nIGxpbmtzIGFzIGEgc3RhcnRpbmcgcG9pbnQ6XFxuXFxuLSBodHRwczovL2dpdGh1Yi5jb20vbHhpZXlhbmcvY2hyb21lLWV4dGVuc2lvbi1ib2lsZXJwbGF0ZS1yZWFjdFxcbi0gaHR0cHM6Ly9naXRodWIuY29tL2xhcnNjb20vbmctY2hyb21lLWV4dGVuc2lvblxcbi0gaHR0cHM6Ly9naXRodWIuY29tL0tvY2FsL3Z1ZS13ZWItZXh0ZW5zaW9uXFxuXFxuIyMgUmVjYXBcXG5cXG5DcmVhdGluZyBDaHJvbWUgZXh0ZW5zaW9ucyBjYW4gYmUgZnVuLCBhbmQgeW91IGNhbiBhbHNvIGZpbmQgbWFueSBwcm9kdWN0aXZlIHNjZW5hcmlvcyBmb3IgdGhlbS4gRGV2ZWxvcGluZyBleHRlbnNpb25zIGlzIGVhc3kgaWYgeW91IGtub3cgYmFzaWMgd2ViIHRlY2hub2xvZ2llcyBhcyBIVE1MLCBDU1MgYW5kIEphdmFTY3JpcHQuIFdlIHNob3dlZCB5b3UgdGhlIGJhc2ljcyBvZiBhIENocm9tZSBleHRlbnNpb24gYW5kIGd1aWRlZCB5b3UgdGhyb3VnaCB0aGUgY3JlYXRpb24gb2YgYSBzaW1wbGUgZXh0ZW5zaW9uLlxcblxcbklmIHlvdSB3YW50IHRvIGNoZWNrIHRoZSBmdWxsIGV4dGVuc2lvbiBjb2RlLCBwbGVhc2UgZ28gdG8gdGhpcyBbZ2l0aHViIHJlcG9zaXRvcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9qZ3VpeC9jaHJvbWUtY2F0LWRldGVjdG9yKS5cXG5cXG5DYW4geW91IGltYWdpbmUgc29tZXRoaW5nIHRoYXQgY291bGQgYmUgZGVsaXZlcmVkIGFzIGEgQ2hyb21lIGV4dGVuc2lvbj8gV2Ugd291bGQgbGlrZSB0byBoZWFyIGFib3V0IHlvdXIgdGhvdWdodHMuXFxuXFxuIyMgQ3JlZGl0c1xcblxcblBob3RvIGJ5IE1hcmt1cyBXaW5rbGVyIG9uIFtVbnNwbGFzaF0oaHR0cHM6Ly91bnNwbGFzaC5jb20vKS5cXG5cIjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./md/blog/2020-05_creating-a-chrome-extension.md\n");

/***/ })

};;